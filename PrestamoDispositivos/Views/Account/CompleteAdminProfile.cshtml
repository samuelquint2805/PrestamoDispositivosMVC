@model PrestamoDispositivos.Models.ViewModels.CompleteAdminProfileViewModel
@{
    ViewData["Title"] = "Completar Perfil de Administrador";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card shadow-lg border-0 rounded-4">
                <div class="card-body p-4">

                    <!-- Header -->
                    <div class="text-center mb-4">
                        <i class="bi bi-person-gear text-primary" style="font-size: 3rem;"></i>
                        <h3 class="mt-3 fw-bold">Perfil de Administrador</h3>
                        <p class="text-muted">Completa tu información profesional</p>
                    </div>

                    <!-- Progress Indicator -->
                    <div class="mb-4">
                        <div class="d-flex justify-content-between mb-2">
                            <small class="text-muted">Paso 2 de 2</small>
                            <small class="text-primary fw-semibold">Casi listo</small>
                        </div>
                        <div class="progress" style="height: 8px;">
                            <div class="progress-bar bg-primary" role="progressbar" style="width: 100%"></div>
                        </div>
                    </div>

                    <!-- Formulario -->
                    <form asp-action="CompleteAdminProfile" asp-controller="Account" method="post">
                        @Html.AntiForgeryToken()

                        <div asp-validation-summary="All" class="alert alert-danger" role="alert"></div>

                        <!-- Nombre Completo -->
                        <div class="mb-3">
                            <label asp-for="Nombre" class="form-label fw-semibold">
                                <i class="bi bi-person-circle me-1"></i>Nombre Completo
                            </label>
                            <input asp-for="Nombre"
                                   class="form-control"
                                   placeholder="Ej: Juan Pérez García"
                                   autofocus />
                            <span asp-validation-for="Nombre" class="text-danger small"></span>
                        </div>

                        

                        <!-- Info Alert -->
                        <div class="alert alert-info border-0 mb-4" role="alert">
                            <i class="bi bi-info-circle-fill me-2"></i>
                            <small>
                                Como administrador tendrás acceso completo al sistema de préstamos de dispositivos.
                            </small>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="btn btn-primary w-100 py-2 fw-semibold">
                            <i class="bi bi-check-circle me-2"></i>Completar Registro
                        </button>
                    </form>

                </div>
            </div>

            <!-- Security Notice -->
            <div class="alert alert-warning mt-3 border-0 rounded-4" role="alert">
                <i class="bi bi-shield-exclamation me-2"></i>
                <small>
                    <strong>Importante:</strong> Esta contraseña es diferente a tu contraseña de cuenta principal.
                    Úsala para acciones administrativas sensibles.
                </small>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        // Toggle password visibility
        document.getElementById('togglePassword')?.addEventListener('click', function() {
            const passwordInput = document.getElementById('passwordInput');
            const eyeIcon = document.getElementById('eyeIcon');

            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('bi-eye');
                eyeIcon.classList.add('bi-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('bi-eye-slash');
                eyeIcon.classList.add('bi-eye');
            }
        });

        // Password strength indicator
        document.getElementById('passwordInput')?.addEventListener('input', function(e) {
            const password = e.target.value;
            const strengthBar = document.getElementById('strengthBar');
            const strengthText = document.getElementById('strengthText');

            let strength = 0;
            if (password.length >= 6) strength += 25;
            if (password.length >= 10) strength += 25;
            if (password.match(/[a-z]/) && password.match(/[A-Z]/)) strength += 25;
            if (password.match(/[0-9]/)) strength += 15;
            if (password.match(/[^a-zA-Z0-9]/)) strength += 10;

            strength = Math.min(strength, 100);
            strengthBar.style.width = strength + '%';

            if (strength === 0) {
                strengthBar.className = 'progress-bar';
                strengthText.textContent = '';
            } else if (strength <= 35) {
                strengthBar.className = 'progress-bar bg-danger';
                strengthText.textContent = 'Débil';
            } else if (strength <= 60) {
                strengthBar.className = 'progress-bar bg-warning';
                strengthText.textContent = 'Media';
            } else if (strength <= 85) {
                strengthBar.className = 'progress-bar bg-info';
                strengthText.textContent = 'Buena';
            } else {
                strengthBar.className = 'progress-bar bg-success';
                strengthText.textContent = 'Fuerte';
            }
        });
    </script>
}

<style>
    .card {
        transition: transform 0.3s ease;
    }

    .form-control:focus,
    .form-select:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25);
    }

    .input-group-text {
        background-color: #f8f9fa;
    }

    .progress {
        border-radius: 4px;
        background-color: #e9ecef;
    }

    .progress-bar {
        transition: width 0.3s ease, background-color 0.3s ease;
    }
</style>